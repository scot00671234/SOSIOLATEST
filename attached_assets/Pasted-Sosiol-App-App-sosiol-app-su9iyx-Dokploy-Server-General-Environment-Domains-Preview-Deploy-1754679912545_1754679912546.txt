Sosiol
App

App
sosiol-app-su9iyx
Dokploy Server
General
Environment
Domains
Preview Deployments
Schedules
Deployments
Logs
Monitoring
Advanced
Deployments
See all the 10 last deployments for this application

If you want to re-deploy this application use this URL in the config of your git provider or docker
Webhook URL:
http://147.93.87.98:3000/api/deploy/g31eG7OZbmPPOa1uv3cDN

1. error
Configure platform for production-ready Nixpacks deployment Refactor deployment configuration to use Nixpacks for Node.js production builds, including database migration in the build phase and resolving path issues. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: f2d7baa7103258106d968c3d2f54f8f52bdbeaf3

2 minutes ago
2m 12s
2. done
Force deployment to exclusively use Docker to prevent build system interference Update configuration files and scripts to enforce Dockerfile usage, disabling all auto-detection mechanisms including Nixpacks, and ensuring a pure Docker deployment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: f7618fdb4710231456bfc7ebe0a3c49bc65b8e24

13 minutes ago
32s
3. error
Ensure database tables exist before application starts on deployment Add a migration script to create necessary database tables, ensuring the application can access community, post, and ad data without errors upon deployment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 0e068d29eafbcd31e0355069a511332fc976c64f

17 minutes ago
30s
4. done
Fix deployment logs SSL connection issue on VPS Adjusted database connection configuration in `server/db.ts` to disable SSL for production environments, resolving the "server does not support SSL connections" error on Dokploy VPS and ensuring functionality across VPS, Railway, and local setups. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 6899480d8acca7b26703c748ed65b1cc07ff8bbb

26 minutes ago
46s
5. done
Update build process to resolve path errors Modify the build phase in nixpacks.toml to include a sed command that replaces `import.meta.dirname` with a hardcoded path in `dist/index.js`, addressing the ERR_INVALID_ARG_TYPE error. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 7235a80139c310b5e8f14e42d2baf6e7f93e377c

about 3 hours ago
40s
6. done
Ensure application starts correctly in production environment Update nixpacks.toml to set PWD and INIT_CWD to /app, and modify the start command to include 'cd /app && npm start' for correct execution in the production environment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 76b81d80f27044b8b2a621e5ef7ab51ddd00448e

about 3 hours ago
54s
7. done
Manual deployment

about 3 hours ago
2s
8. done
Manual deployment

about 3 hours ago
49s
9. done
Add production database configuration for Node.js applications Update nixpacks.toml to include a commented-out DATABASE_URL variable for production environments and add deployment logs showing Nixpacks build process for a Node.js application. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 01cb77424e2f625affe06198f699cdd6112c7482

about 3 hours ago
45s
10. done
Manual deployment

about 3 hours ago
34s
11. done
Ensure deployment uses Node.js server without Caddy Update nixpacks.toml to disable Caddy and explicitly configure Node.js server, preventing duplicate provider errors and ensuring correct build phases. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 1c8591641698302864c52a0288401fe68f22112b

about 3 hours ago
2m 20s
Application: App - Sosiol | Dokploy
184
Deployment
See all the details of this deployment | 

Initializing deployment
Clonning Repo github.com/scot00671234/SOSIOLATEST.git to /etc/dokploy/applications/sosiol-app-su9iyx/code: ✅
Cloning into '/etc/dokploy/applications/sosiol-app-su9iyx/code'...
remote: Enumerating objects: 175, done.
Cloned github.com/scot00671234/SOSIOLATEST.git: ✅
Build nixpacks: ✅
Source Type: github: ✅
╔═════════════════════ Nixpacks v1.39.0 ═════════════════════╗
║ setup      │ nodejs_18                                     ║
║────────────────────────────────────────────────────────────║
║ caddy      │ pkgs: caddy                                   ║
║            │ cmds: caddy fmt --overwrite /assets/Caddyfile ║
║────────────────────────────────────────────────────────────║
║ install    │ npm ci                                        ║
║────────────────────────────────────────────────────────────║
║ build      │ npm run build                                 ║
║            │ node scripts/migrate-db.js                    ║
║────────────────────────────────────────────────────────────║
║ start      │ npm start                                     ║
╚════════════════════════════════════════════════════════════╝
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.73kB done
#1 DONE 0.0s
#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1745885067
#2 DONE 0.3s
#3 [internal] load .dockerignore
#3 transferring context: 249B done
#3 DONE 0.0s
#4 [stage-0  1/16] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1745885067@sha256:d45c89d80e13d7ad0fd555b5130f22a866d9dd10e861f589932303ef2314c7de
#4 DONE 0.0s
#5 [internal] load build context
#5 transferring context: 5.12MB 0.1s done
#5 DONE 0.1s
#6 [stage-0  2/16] WORKDIR /app/
#6 CACHED
#7 [stage-0  3/16] COPY .nixpacks/nixpkgs-ba913eda2df8eb72147259189d55932012df6301.nix .nixpacks/nixpkgs-ba913eda2df8eb72147259189d55932012df6301.nix
#7 CACHED
#8 [stage-0  4/16] RUN nix-env -if .nixpacks/nixpkgs-ba913eda2df8eb72147259189d55932012df6301.nix && nix-collect-garbage -d
#8 CACHED
#9 [stage-0  5/16] COPY .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix
#9 DONE 0.1s
#10 [stage-0  6/16] RUN nix-env -if .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix && nix-collect-garbage -d
#10 0.359 unpacking 'https://github.com/NixOS/nixpkgs/archive/ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.tar.gz' into the Git cache...
#10 76.19 unpacking 'https://github.com/railwayapp/nix-npm-overlay/archive/main.tar.gz' into the Git cache...
#10 77.02 installing 'ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env'
#10 78.28 these 3 derivations will be built:
#10 78.28   /nix/store/cjdjkmr6gy2h8l0cra71whgrvy030kx1-libraries.drv
#10 78.28   /nix/store/bs6g8vhkfynvlzidhlqbsvnc9wijbaaz-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv
#10 78.28   /nix/store/snllp5gsbghcwzsbc5zmd8p0x416qx9v-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv
#10 78.28 these 44 paths will be fetched (47.87 MiB download, 242.81 MiB unpacked):
#10 78.28   /nix/store/cf7gkacyxmm66lwl5nj6j6yykbrg4q5c-acl-2.3.2
#10 78.28   /nix/store/a9jgnlhkjkxav6qrc3rzg2q84pkl2wvr-attr-2.5.2
#10 78.28   /nix/store/5mh7kaj2fyv8mk4sfq1brwxgc02884wi-bash-5.2p37
#10 78.28   /nix/store/wf5zj2gbib3gjqllkabxaw4dh0gzcla3-builder.pl
#10 78.28   /nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8
#10 78.28   /nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin
#10 78.28   /nix/store/4s9rah4cwaxflicsk5cndnknqlk9n4p3-coreutils-9.5
#10 78.28   /nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10
#10 78.28   /nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2
#10 78.28   /nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46
#10 78.28   /nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0
#10 78.28   /nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1
#10 78.28   /nix/store/bpq1s72cw9qb2fs8mnmlw6hn2c7iy0ss-gcc-14-20241116-lib
#10 78.28   /nix/store/17v0ywnr3akp85pvdi56gwl99ljv95kx-gcc-14-20241116-libgcc
#10 78.28   /nix/store/65h17wjrrlsj2rj540igylrx7fqcd6vq-glibc-2.40-36
#10 78.28   /nix/store/a2byxfv4lc8f2g5xfzw8cz5q8k05wi29-gmp-with-cxx-6.3.0
#10 78.28   /nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01
#10 78.28   /nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11
#10 78.28   /nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1
#10 78.28   /nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9
#10 78.28   /nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35
#10 78.28   /nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13
#10 78.28   /nix/store/wwipgdqb4p2fr46kmw9c5wlk799kbl68-icu4c-74.2
#10 78.28   /nix/store/m8w3mf0i4862q22bxad0wspkgdy4jnkk-icu4c-74.2-dev
#10 78.28   /nix/store/34z2792zyd4ayl5186vx0s98ckdaccz9-libidn2-2.3.7
#10 78.28   /nix/store/xcqcgqazykf6s7fsn08k0blnh0wisdcl-libunistring-1.3
#10 78.28   /nix/store/r9ac2hwnmb0nxwsrvr6gi9wsqf2whfqj-libuv-1.49.2
#10 78.28   /nix/store/ll14czvpxglf6nnwmmrmygplm830fvlv-libuv-1.49.2-dev
#10 78.28   /nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36
#10 78.28   /nix/store/wlpq101dsifq98z2bk300x4dk80wcybr-nodejs-18.20.5
#10 78.28   /nix/store/h1ydpxkw9qhjdxjpic1pdc2nirggyy6f-openssl-3.3.2
#10 78.28   /nix/store/lygl27c44xv73kx1spskcgvzwq7z337c-openssl-3.3.2-bin
#10 78.28   /nix/store/pp2zf8bdgyz60ds8vcshk2603gcjgp72-openssl-3.3.2-dev
#10 78.28   /nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6
#10 78.28   /nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0
#10 78.28   /nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44
#10 78.28   /nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0
#10 78.28   /nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux
#10 78.28   /nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook
#10 78.28   /nix/store/acfkqzj5qrqs88a4a6ixnybbjxja663d-xgcc-14-20241116-libgcc
#10 78.28   /nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3
#10 78.28   /nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin
#10 78.28   /nix/store/cqlaa2xf6lslnizyj9xqa8j0ii1yqw0x-zlib-1.3.1
#10 78.28   /nix/store/1lggwqzapn5mn49l9zy4h566ysv9kzdb-zlib-1.3.1-dev
#10 78.29 copying path '/nix/store/wf5zj2gbib3gjqllkabxaw4dh0gzcla3-builder.pl' from 'https://cache.nixos.org'...
#10 78.30 copying path '/nix/store/17v0ywnr3akp85pvdi56gwl99ljv95kx-gcc-14-20241116-libgcc' from 'https://cache.nixos.org'...
#10 78.30 copying path '/nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01' from 'https://cache.nixos.org'...
#10 78.30 copying path '/nix/store/acfkqzj5qrqs88a4a6ixnybbjxja663d-xgcc-14-20241116-libgcc' from 'https://cache.nixos.org'...
#10 78.30 copying path '/nix/store/xcqcgqazykf6s7fsn08k0blnh0wisdcl-libunistring-1.3' from 'https://cache.nixos.org'...
#10 78.31 copying path '/nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook' from 'https://cache.nixos.org'...
#10 78.35 copying path '/nix/store/34z2792zyd4ayl5186vx0s98ckdaccz9-libidn2-2.3.7' from 'https://cache.nixos.org'...
#10 78.42 copying path '/nix/store/65h17wjrrlsj2rj540igylrx7fqcd6vq-glibc-2.40-36' from 'https://cache.nixos.org'...
#10 81.30 copying path '/nix/store/a9jgnlhkjkxav6qrc3rzg2q84pkl2wvr-attr-2.5.2' from 'https://cache.nixos.org'...
#10 81.30 copying path '/nix/store/5mh7kaj2fyv8mk4sfq1brwxgc02884wi-bash-5.2p37' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/bpq1s72cw9qb2fs8mnmlw6hn2c7iy0ss-gcc-14-20241116-lib' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/r9ac2hwnmb0nxwsrvr6gi9wsqf2whfqj-libuv-1.49.2' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/h1ydpxkw9qhjdxjpic1pdc2nirggyy6f-openssl-3.3.2' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3' from 'https://cache.nixos.org'...
#10 81.31 copying path '/nix/store/cqlaa2xf6lslnizyj9xqa8j0ii1yqw0x-zlib-1.3.1' from 'https://cache.nixos.org'...
#10 81.38 copying path '/nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin' from 'https://cache.nixos.org'...
#10 81.41 copying path '/nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6' from 'https://cache.nixos.org'...
#10 81.42 copying path '/nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46' from 'https://cache.nixos.org'...
#10 81.42 copying path '/nix/store/1lggwqzapn5mn49l9zy4h566ysv9kzdb-zlib-1.3.1-dev' from 'https://cache.nixos.org'...
#10 81.43 copying path '/nix/store/cf7gkacyxmm66lwl5nj6j6yykbrg4q5c-acl-2.3.2' from 'https://cache.nixos.org'...
#10 81.45 copying path '/nix/store/ll14czvpxglf6nnwmmrmygplm830fvlv-libuv-1.49.2-dev' from 'https://cache.nixos.org'...
#10 81.61 copying path '/nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35' from 'https://cache.nixos.org'...
#10 81.71 copying path '/nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin' from 'https://cache.nixos.org'...
#10 81.73 copying path '/nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13' from 'https://cache.nixos.org'...
#10 81.77 copying path '/nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11' from 'https://cache.nixos.org'...
#10 82.15 copying path '/nix/store/lygl27c44xv73kx1spskcgvzwq7z337c-openssl-3.3.2-bin' from 'https://cache.nixos.org'...
#10 82.18 copying path '/nix/store/a2byxfv4lc8f2g5xfzw8cz5q8k05wi29-gmp-with-cxx-6.3.0' from 'https://cache.nixos.org'...
#10 82.18 copying path '/nix/store/wwipgdqb4p2fr46kmw9c5wlk799kbl68-icu4c-74.2' from 'https://cache.nixos.org'...
#10 82.18 copying path '/nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0' from 'https://cache.nixos.org'...
#10 82.20 copying path '/nix/store/pp2zf8bdgyz60ds8vcshk2603gcjgp72-openssl-3.3.2-dev' from 'https://cache.nixos.org'...
#10 82.27 copying path '/nix/store/4s9rah4cwaxflicsk5cndnknqlk9n4p3-coreutils-9.5' from 'https://cache.nixos.org'...
#10 82.65 copying path '/nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10' from 'https://cache.nixos.org'...
#10 82.65 copying path '/nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0' from 'https://cache.nixos.org'...
#10 82.66 copying path '/nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0' from 'https://cache.nixos.org'...
#10 82.91 copying path '/nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux' from 'https://cache.nixos.org'...
#10 83.04 building '/nix/store/cjdjkmr6gy2h8l0cra71whgrvy030kx1-libraries.drv'...
#10 83.70 building '/nix/store/bs6g8vhkfynvlzidhlqbsvnc9wijbaaz-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv'...
#10 84.28 copying path '/nix/store/m8w3mf0i4862q22bxad0wspkgdy4jnkk-icu4c-74.2-dev' from 'https://cache.nixos.org'...
#10 84.54 copying path '/nix/store/wlpq101dsifq98z2bk300x4dk80wcybr-nodejs-18.20.5' from 'https://cache.nixos.org'...
#10 86.78 building '/nix/store/snllp5gsbghcwzsbc5zmd8p0x416qx9v-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv'...
#10 87.06 created 5 symlinks in user environment
#10 87.33 building '/nix/store/whqfnm63a83i8dgvqqlds8fw738i44sd-user-environment.drv'...
#10 87.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/profile
#10 87.78 removing profile version 2
#10 87.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/channels
#10 87.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/profile
#10 87.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/channels
#10 87.79 finding garbage collector roots...
#10 87.79 removing stale link from '/nix/var/nix/gcroots/auto/v73nmmh5d8van4ja5c8jn0gjlwhxbz3a' to '/nix/var/nix/profiles/per-user/root/profile-2-link'
#10 87.80 deleting garbage...
#10 87.94 deleting '/nix/store/na4c03201p0gmhn3bqr089x0xqia157w-source'
#10 87.94 deleting '/nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0'
#10 88.04 deleting '/nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux'
#10 88.04 deleting '/nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin'
#10 88.04 deleting '/nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3'
#10 88.05 deleting '/nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9'
#10 88.06 deleting '/nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36'
#10 88.06 deleting '/nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin'
#10 88.06 deleting '/nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8'
#10 88.07 deleting '/nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46'
#10 88.07 deleting '/nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook'
#10 88.07 deleting '/nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0'
#10 88.07 deleting '/nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01'
#10 88.07 deleting '/nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6'
#10 88.07 deleting '/nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2'
#10 88.07 deleting '/nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1'
#10 88.08 deleting '/nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13'
#10 88.09 deleting '/nix/store/1c0dv2pdlshjz5kmjd4dfp3c96yncr23-libraries'
#10 88.09 deleting '/nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11'
#10 88.10 deleting '/nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44'
#10 88.10 deleting '/nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0'
#10 88.11 deleting '/nix/store/lwi59jcfwk2lnrakmm1y5vw85hj3n1bi-source'
#10 93.66 deleting '/nix/store/wf5zj2gbib3gjqllkabxaw4dh0gzcla3-builder.pl'
#10 93.66 deleting '/nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10'
#10 93.66 deleting '/nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1'
#10 93.67 deleting '/nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35'
#10 93.68 deleting '/nix/store/3jjimb9v9hc78vyp8g6mj86xwz4qqwxm-user-environment'
#10 93.71 deleting '/nix/store/5q154c0kqyja8hjj5iqvrflg2znnawb0-user-environment.drv'
#10 93.71 deleting '/nix/store/9virg6mk4pgjf5j8k9p9ibby40x8qvfr-env-manifest.nix'
#10 93.71 deleting unused links...
#10 99.10 note: currently hard linking saves -0.83 MiB
#10 99.10 29 store paths deleted, 248.00 MiB freed
#10 DONE 99.2s
#11 [stage-0  7/16] COPY .nixpacks/assets /assets/
#11 DONE 0.0s
#12 [stage-0  8/16] COPY . /app/.
#12 DONE 0.1s
#13 [stage-0  9/16] RUN  caddy fmt --overwrite /assets/Caddyfile
#13 DONE 0.5s
#14 [stage-0 10/16] COPY . /app/.
#14 DONE 0.1s
#15 [stage-0 11/16] RUN --mount=type=cache,id=cY7etteaxFY-/root/npm,target=/root/.npm npm ci
#15 0.380 npm warn config production Use `--omit=dev` instead.
#15 7.707 npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
#15 8.115 npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
#15 17.93
#15 17.93 added 491 packages, and audited 492 packages in 18s
#15 17.93
#15 17.93 66 packages are looking for funding
#15 17.93   run `npm fund` for details
#15 17.98
#15 17.98 11 vulnerabilities (3 low, 8 moderate)
#15 17.98
#15 17.98 To address issues that do not require attention, run:
#15 17.98   npm audit fix
#15 17.98
#15 17.98 To address all issues (including breaking changes), run:
#15 17.98   npm audit fix --force
#15 17.98
#15 17.98 Run `npm audit` for details.
#15 DONE 18.3s
#16 [stage-0 12/16] COPY . /app/.
#16 DONE 0.1s
#17 [stage-0 13/16] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache npm run build
#17 0.317 npm warn config production Use `--omit=dev` instead.
#17 0.354
#17 0.354 > rest-express@1.0.0 build
#17 0.354 > vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
#17 0.354
#17 0.685 vite v5.4.19 building for production...
#17 0.832 transforming...
#17 1.953 Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
#17 1.953   npx update-browserslist-db@latest
#17 1.953   Why you should do it regularly: https://github.com/browserslist/update-db#readme
#17 11.08 ✓ 1845 modules transformed.
#17 11.37 rendering chunks...
#17 11.64 computing gzip size...
#17 11.80 ../dist/public/index.html                   0.74 kB │ gzip:   0.45 kB
#17 11.80 ../dist/public/assets/index-C-LBe330.css   74.40 kB │ gzip:  12.54 kB
#17 11.80 
#17 11.80 (!) Some chunks are larger than 500 kB after minification. Consider:
#17 11.80 - Using dynamic import() to code-split the application
#17 11.80 - Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
#17 11.80 - Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
#17 11.80 ../dist/public/assets/index-CtFyKYG2.js     2.47 kB │ gzip:   1.18 kB
#17 11.80 ../dist/public/assets/index-SEd2oJtE.js   518.63 kB │ gzip: 156.93 kB
#17 11.80 ✓ built in 11.06s
#17 11.99
#17 11.99   dist/index.js  26.4kb
#17 11.99
#17 11.99 ⚡ Done in 9ms
#17 DONE 12.0s
#18 [stage-0 14/16] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache node scripts/migrate-db.js
#18 0.418 🔄 Connecting to database...
#18 0.420 🔄 Running database migration...
#18 0.436 ❌ Migration failed: Error: getaddrinfo ENOTFOUND sosiol-database-khohaw
#18 0.436     at /app/node_modules/pg-pool/index.js:45:11
#18 0.436     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
#18 0.436     at async runMigration (file:///app/scripts/migrate-db.js:34:5) {
#18 0.436   errno: -3008,
#18 0.436   code: 'ENOTFOUND',
#18 0.436   syscall: 'getaddrinfo',
#18 0.436   hostname: 'sosiol-database-khohaw'
#18 0.436 }
#18 ERROR: process "/bin/bash -ol pipefail -c node scripts/migrate-db.js" did not complete successfully: exit code: 1
------
> [stage-0 14/16] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache node scripts/migrate-db.js:
0.420 🔄 Running database migration...
0.436 ❌ Migration failed: Error: getaddrinfo ENOTFOUND sosiol-database-khohaw
0.436     at /app/node_modules/pg-pool/index.js:45:11
0.436     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
0.436     at async runMigration (file:///app/scripts/migrate-db.js:34:5) {
0.436   errno: -3008,
0.436   code: 'ENOTFOUND',
0.436   syscall: 'getaddrinfo',
0.436   hostname: 'sosiol-database-khohaw'
0.436 }
------
7 warnings found (use docker --debug to expand):
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "SESSION_SECRET") (line 13)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "STRIPE_SECRET_KEY") (line 13)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "STRIPE_WEBHOOK_SECRET") (line 13)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "SESSION_SECRET") (line 14)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "STRIPE_SECRET_KEY") (line 14)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "STRIPE_WEBHOOK_SECRET") (line 14)
- UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 24)
Dockerfile:31
--------------------
|     COPY . /app/.
|     RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache npm run build
| >>> RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache node scripts/migrate-db.js
|
|
--------------------
ERROR: failed to solve: process "/bin/bash -ol pipefail -c node scripts/migrate-db.js" did not complete successfully: exit code: 1
Error: Docker build failed
Error response from daemon: No such container: sosiol-app-su9iyx-c_OvWA1TBL
Error ❌
Error response from daemon: No such container: sosiol-app-su9iyx-c_OvWA1TBL