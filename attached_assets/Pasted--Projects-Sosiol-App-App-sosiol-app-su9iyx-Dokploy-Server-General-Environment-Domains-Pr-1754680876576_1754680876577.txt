
Projects
Sosiol
App

App
sosiol-app-su9iyx
Dokploy Server
General
Environment
Domains
Preview Deployments
Schedules
Deployments
Logs
Monitoring
Advanced
Deployments
See all the 10 last deployments for this application

If you want to re-deploy this application use this URL in the config of your git provider or docker
Webhook URL:
http://147.93.87.98:3000/api/deploy/g31eG7OZbmPPOa1uv3cDN

1. done
Update build process to correctly handle environment path Modify nixpacks.toml to use the correct delimiter for sed command in the build phase, resolving an issue with escape characters. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 9dc9071d1374f72b41f387712796d269724615cb

2 minutes ago
37s
2. error
Enable production deployment by fixing build and server startup issues Fixes ERR_INVALID_ARG_TYPE by replacing import.meta.dirname with a hardcoded path in dist/index.js during the build process, and configures port forwarding for the production environment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 4c38403432dd9036232124a6bcfa8f9a7e4690a9

3 minutes ago
1s
3. done
Improve deployment stability by disabling Caddy and fixing build errors Disables Caddy in nixpacks.toml, restores client/index.html to fix Vite build errors, and ensures Node.js-only deployment for Dokploy VPS. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 063e2721b5ff8fba99d743af71d66398331313ca

9 minutes ago
38s
4. error
Ensure server deployment without interference from static site detection Force Nixpacks to use the Node.js provider exclusively by disabling Caddy, removing static content detection files, and adding a dummy server.js file. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: a2fae68be238bb66d96bc191497213ba002a02cc

14 minutes ago
1m 50s
5. error
Configure platform for production-ready Nixpacks deployment Refactor deployment configuration to use Nixpacks for Node.js production builds, including database migration in the build phase and resolving path issues. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: f2d7baa7103258106d968c3d2f54f8f52bdbeaf3

18 minutes ago
2m 12s
6. done
Force deployment to exclusively use Docker to prevent build system interference Update configuration files and scripts to enforce Dockerfile usage, disabling all auto-detection mechanisms including Nixpacks, and ensuring a pure Docker deployment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: f7618fdb4710231456bfc7ebe0a3c49bc65b8e24

29 minutes ago
32s
7. error
Ensure database tables exist before application starts on deployment Add a migration script to create necessary database tables, ensuring the application can access community, post, and ad data without errors upon deployment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 0e068d29eafbcd31e0355069a511332fc976c64f

33 minutes ago
30s
8. done
Fix deployment logs SSL connection issue on VPS Adjusted database connection configuration in `server/db.ts` to disable SSL for production environments, resolving the "server does not support SSL connections" error on Dokploy VPS and ensuring functionality across VPS, Railway, and local setups. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 6899480d8acca7b26703c748ed65b1cc07ff8bbb

42 minutes ago
46s
9. done
Update build process to resolve path errors Modify the build phase in nixpacks.toml to include a sed command that replaces `import.meta.dirname` with a hardcoded path in `dist/index.js`, addressing the ERR_INVALID_ARG_TYPE error. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 7235a80139c310b5e8f14e42d2baf6e7f93e377c

about 3 hours ago
40s
10. done
Ensure application starts correctly in production environment Update nixpacks.toml to set PWD and INIT_CWD to /app, and modify the start command to include 'cd /app && npm start' for correct execution in the production environment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 76b81d80f27044b8b2a621e5ef7ab51ddd00448e

about 3 hours ago
54s
11. done
Manual deployment

about 3 hours ago
2s
Application: App - Sosiol | Dokploy
184
Deployment
See all the details of this deployment | 

Initializing deployment
Clonning Repo github.com/scot00671234/SOSIOLATEST.git to /etc/dokploy/applications/sosiol-app-su9iyx/code: ✅
Cloning into '/etc/dokploy/applications/sosiol-app-su9iyx/code'...
remote: Enumerating objects: 181, done.
Cloned github.com/scot00671234/SOSIOLATEST.git: ✅
Build nixpacks: ✅
Source Type: github: ✅
╔══════════════════════════════ Nixpacks v1.39.0 ══════════════════════════════╗
║ setup      │ nodejs_18                                                       ║
║──────────────────────────────────────────────────────────────────────────────║
║ caddy      │ echo 'CADDY PHASE COMPLETELY DISABLED'                          ║
║            │ echo 'NODE.JS SERVER HANDLES ALL REQUESTS'                      ║
║            │ rm -rf /assets/Caddyfile || true                                ║
║            │ mkdir -p /app/dist/public || true                               ║
║──────────────────────────────────────────────────────────────────────────────║
║ install    │ npm ci                                                          ║
║──────────────────────────────────────────────────────────────────────────────║
║ build      │ npm run build                                                   ║
║            │ sed -i 's|import\.meta\.dirname|"/app"|g' dist/index.js || true ║
║            │ node scripts/migrate-db.js || echo 'Migration will run at       ║
║            │ startup'                                                        ║
║──────────────────────────────────────────────────────────────────────────────║
║ start      │ npm start                                                       ║
╚══════════════════════════════════════════════════════════════════════════════╝
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.91kB done
#1 DONE 0.0s
#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1745885067
#2 DONE 0.3s
#3 [internal] load .dockerignore
#3 transferring context: 249B done
#3 DONE 0.0s
#4 [stage-0  1/18] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1745885067@sha256:d45c89d80e13d7ad0fd555b5130f22a866d9dd10e861f589932303ef2314c7de
#4 DONE 0.0s
#5 [internal] load build context
#5 transferring context: 5.17MB 0.1s done
#5 DONE 0.1s
#6 [stage-0  2/18] WORKDIR /app/
#6 CACHED
#7 [stage-0  3/18] COPY .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix
#7 CACHED
#8 [stage-0  4/18] RUN nix-env -if .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix && nix-collect-garbage -d
#8 CACHED
#9 [stage-0  5/18] COPY .nixpacks/assets /assets/
#9 CACHED
#10 [stage-0  6/18] COPY . /app/.
#10 DONE 0.1s
#11 [stage-0  7/18] RUN  echo 'CADDY PHASE COMPLETELY DISABLED'
#11 0.187 CADDY PHASE COMPLETELY DISABLED
#11 DONE 0.2s
#12 [stage-0  8/18] RUN  echo 'NODE.JS SERVER HANDLES ALL REQUESTS'
#12 0.243 NODE.JS SERVER HANDLES ALL REQUESTS
#12 DONE 0.3s
#13 [stage-0  9/18] RUN  rm -rf /assets/Caddyfile || true
#13 DONE 0.2s
#14 [stage-0 10/18] RUN  mkdir -p /app/dist/public || true
#14 DONE 0.3s
#15 [stage-0 11/18] COPY . /app/.
#15 DONE 0.1s
#16 [stage-0 12/18] RUN --mount=type=cache,id=cY7etteaxFY-/root/npm,target=/root/.npm npm ci
#16 0.280 npm warn config production Use `--omit=dev` instead.
#16 6.433 npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
#16 6.664 npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
#16 16.32
#16 16.32 added 491 packages, and audited 492 packages in 16s
#16 16.32
#16 16.32 66 packages are looking for funding
#16 16.32   run `npm fund` for details
#16 16.37
#16 16.37 11 vulnerabilities (3 low, 8 moderate)
#16 16.37
#16 16.37 To address issues that do not require attention, run:
#16 16.37   npm audit fix
#16 16.37
#16 16.37 To address all issues (including breaking changes), run:
#16 16.37   npm audit fix --force
#16 16.37
#16 16.37 Run `npm audit` for details.
#16 DONE 16.6s
#17 [stage-0 13/18] COPY . /app/.
#17 DONE 0.1s
#18 [stage-0 14/18] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache npm run build
#18 0.340 npm warn config production Use `--omit=dev` instead.
#18 0.395
#18 0.395 > rest-express@1.0.0 build
#18 0.395 > vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
#18 0.395
#18 0.674 vite v5.4.19 building for production...
#18 0.727 transforming...
#18 1.108 Browserslist: browsers data (caniuse-lite) is 10 months old. Please run:
#18 1.108   npx update-browserslist-db@latest
#18 1.108   Why you should do it regularly: https://github.com/browserslist/update-db#readme
#18 10.39 ✓ 1845 modules transformed.
#18 11.01 rendering chunks...
#18 11.48 computing gzip size...
#18 11.72 ../dist/public/index.html                   0.50 kB │ gzip:   0.33 kB
#18 11.73 ../dist/public/assets/index-C-LBe330.css   74.40 kB │ gzip:  12.54 kB
#18 11.73 ../dist/public/assets/index-CtFyKYG2.js     2.47 kB │ gzip:   1.18 kB
#18 11.73 ../dist/public/assets/index-SEd2oJtE.js   518.63 kB │ gzip: 156.93 kB
#18 11.73 
#18 11.73 (!) Some chunks are larger than 500 kB after minification. Consider:
#18 11.73 - Using dynamic import() to code-split the application
#18 11.73 - Use build.rollupOptions.output.manualChunks to improve chunking: https://rollupjs.org/configuration-options/#output-manualchunks
#18 11.73 - Adjust chunk size limit for this warning via build.chunkSizeWarningLimit.
#18 11.74 ✓ built in 11.04s
#18 12.06
#18 12.06   dist/index.js  26.4kb
#18 12.06
#18 12.06 ⚡ Done in 15ms
#18 DONE 12.2s
#19 [stage-0 15/18] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache sed -i 's|import\.meta\.dirname|"/app"|g' dist/index.js || true
#19 DONE 0.4s
#20 [stage-0 16/18] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache node scripts/migrate-db.js || echo 'Migration will run at startup'
#20 0.428 🔄 Connecting to database...
#20 0.430 🔄 Running database migration...
#20 0.445 ❌ Migration failed: Error: getaddrinfo ENOTFOUND sosiol-database-khohaw
#20 0.445     at /app/node_modules/pg-pool/index.js:45:11
#20 0.445     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
#20 0.445     at async runMigration (file:///app/scripts/migrate-db.js:34:5) {
#20 0.445   errno: -3008,
#20 0.445   code: 'ENOTFOUND',
#20 0.445   syscall: 'getaddrinfo',
#20 0.445   hostname: 'sosiol-database-khohaw'
#20 0.445 }
#20 0.457 Migration will run at startup
#20 DONE 0.5s
#21 [stage-0 17/18] RUN printf '\nPATH=/app/node_modules/.bin:$PATH' >> /root/.profile
#21 DONE 0.3s
#22 [stage-0 18/18] COPY . /app
#22 DONE 0.1s
#23 exporting to image
#23 exporting layers
#23 exporting layers 4.0s done
#23 writing image sha256:fe23ed45447187715fca21de6346d6a7bfecd602716b50bc2bbea8cb21151e2f
#23 writing image sha256:fe23ed45447187715fca21de6346d6a7bfecd602716b50bc2bbea8cb21151e2f done
#23 naming to docker.io/library/sosiol-app-su9iyx done
#23 DONE 4.0s
7 warnings found (use docker --debug to expand):
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "STRIPE_SECRET_KEY") (line 11)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "STRIPE_WEBHOOK_SECRET") (line 11)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "SESSION_SECRET") (line 12)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "STRIPE_SECRET_KEY") (line 12)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "STRIPE_WEBHOOK_SECRET") (line 12)
- UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 25)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "SESSION_SECRET") (line 11)
=== Successfully Built! ===
Run:
docker run -it sosiol-app-su9iyx
Docker Deployed: ✅