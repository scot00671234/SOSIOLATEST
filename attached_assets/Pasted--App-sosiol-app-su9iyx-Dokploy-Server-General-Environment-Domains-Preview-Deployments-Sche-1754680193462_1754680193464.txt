

App
sosiol-app-su9iyx
Dokploy Server
General
Environment
Domains
Preview Deployments
Schedules
Deployments
Logs
Monitoring
Advanced
Deployments
See all the 10 last deployments for this application

If you want to re-deploy this application use this URL in the config of your git provider or docker
Webhook URL:
http://147.93.87.98:3000/api/deploy/g31eG7OZbmPPOa1uv3cDN

1. error
Ensure server deployment without interference from static site detection Force Nixpacks to use the Node.js provider exclusively by disabling Caddy, removing static content detection files, and adding a dummy server.js file. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: a2fae68be238bb66d96bc191497213ba002a02cc

2 minutes ago
1m 50s
2. error
Configure platform for production-ready Nixpacks deployment Refactor deployment configuration to use Nixpacks for Node.js production builds, including database migration in the build phase and resolving path issues. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: f2d7baa7103258106d968c3d2f54f8f52bdbeaf3

7 minutes ago
2m 12s
3. done
Force deployment to exclusively use Docker to prevent build system interference Update configuration files and scripts to enforce Dockerfile usage, disabling all auto-detection mechanisms including Nixpacks, and ensuring a pure Docker deployment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: f7618fdb4710231456bfc7ebe0a3c49bc65b8e24

17 minutes ago
32s
4. error
Ensure database tables exist before application starts on deployment Add a migration script to create necessary database tables, ensuring the application can access community, post, and ad data without errors upon deployment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 0e068d29eafbcd31e0355069a511332fc976c64f

22 minutes ago
30s
5. done
Fix deployment logs SSL connection issue on VPS Adjusted database connection configuration in `server/db.ts` to disable SSL for production environments, resolving the "server does not support SSL connections" error on Dokploy VPS and ensuring functionality across VPS, Railway, and local setups. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b8200824-c7dd-4da6-b963-372dcaa2bcc0 Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/36c0149e-912f-43f5-b504-de705b030e8f/b8200824-c7dd-4da6-b963-372dcaa2bcc0/zVoQtUD
Hash: 6899480d8acca7b26703c748ed65b1cc07ff8bbb

30 minutes ago
46s
6. done
Update build process to resolve path errors Modify the build phase in nixpacks.toml to include a sed command that replaces `import.meta.dirname` with a hardcoded path in `dist/index.js`, addressing the ERR_INVALID_ARG_TYPE error. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 7235a80139c310b5e8f14e42d2baf6e7f93e377c

about 3 hours ago
40s
7. done
Ensure application starts correctly in production environment Update nixpacks.toml to set PWD and INIT_CWD to /app, and modify the start command to include 'cd /app && npm start' for correct execution in the production environment. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 76b81d80f27044b8b2a621e5ef7ab51ddd00448e

about 3 hours ago
54s
8. done
Manual deployment

about 3 hours ago
2s
9. done
Manual deployment

about 3 hours ago
49s
10. done
Add production database configuration for Node.js applications Update nixpacks.toml to include a commented-out DATABASE_URL variable for production environments and add deployment logs showing Nixpacks build process for a Node.js application. Replit-Commit-Author: Agent Replit-Commit-Session-Id: b4b3a676-75fb-4f53-8d45-32c05123de2b Replit-Commit-Checkpoint-Type: full_checkpoint Replit-Commit-Screenshot-Url: https://storage.googleapis.com/screenshot-production-us-central1/87b040ce-8108-4f4d-8f25-bd1245aafaba/b4b3a676-75fb-4f53-8d45-32c05123de2b/rqc6aRh
Hash: 01cb77424e2f625affe06198f699cdd6112c7482

about 3 hours ago
45s
11. done
Manual deployment

about 3 hours ago
34s
Application: App - Sosiol | Dokploy
184
Deployment
See all the details of this deployment | 

Initializing deployment
Clonning Repo github.com/scot00671234/SOSIOLATEST.git to /etc/dokploy/applications/sosiol-app-su9iyx/code: ✅
Cloning into '/etc/dokploy/applications/sosiol-app-su9iyx/code'...
remote: Enumerating objects: 179, done.
Cloned github.com/scot00671234/SOSIOLATEST.git: ✅
Build nixpacks: ✅
Source Type: github: ✅
╔══════════════════════════════ Nixpacks v1.39.0 ══════════════════════════════╗
║ setup      │ pkgs: nodejs_18                                                 ║
║            │ cmds: rm -rf client/index.html dist/public/index.html || true   ║
║──────────────────────────────────────────────────────────────────────────────║
║ caddy      │ echo 'CADDY PHASE COMPLETELY DISABLED'                          ║
║            │ echo 'NODE.JS SERVER HANDLES ALL REQUESTS'                      ║
║            │ rm -rf /assets/Caddyfile || true                                ║
║──────────────────────────────────────────────────────────────────────────────║
║ install    │ npm ci                                                          ║
║──────────────────────────────────────────────────────────────────────────────║
║ build      │ npm run build                                                   ║
║            │ node scripts/migrate-db.js || echo 'Migration will run at       ║
║            │ startup'                                                        ║
║──────────────────────────────────────────────────────────────────────────────║
║ start      │ npm start                                                       ║
╚══════════════════════════════════════════════════════════════════════════════╝
#0 building with "default" instance using docker driver
#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 1.78kB done
#1 DONE 0.0s
#2 [internal] load metadata for ghcr.io/railwayapp/nixpacks:ubuntu-1745885067
#2 DONE 0.4s
#3 [internal] load .dockerignore
#3 transferring context: 249B done
#3 DONE 0.0s
#4 [stage-0  1/18] FROM ghcr.io/railwayapp/nixpacks:ubuntu-1745885067@sha256:d45c89d80e13d7ad0fd555b5130f22a866d9dd10e861f589932303ef2314c7de
#4 DONE 0.0s
#5 [internal] load build context
#5 transferring context: 5.14MB 0.2s done
#5 DONE 0.2s
#6 [stage-0  2/18] WORKDIR /app/
#6 CACHED
#7 [stage-0  3/18] COPY .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix
#7 DONE 0.1s
#8 [stage-0  4/18] RUN nix-env -if .nixpacks/nixpkgs-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.nix && nix-collect-garbage -d
#8 0.530 unpacking 'https://github.com/NixOS/nixpkgs/archive/ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7.tar.gz' into the Git cache...
#8 66.51 unpacking 'https://github.com/railwayapp/nix-npm-overlay/archive/main.tar.gz' into the Git cache...
#8 67.26 installing 'ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env'
#8 68.20 these 3 derivations will be built:
#8 68.20   /nix/store/cjdjkmr6gy2h8l0cra71whgrvy030kx1-libraries.drv
#8 68.20   /nix/store/bs6g8vhkfynvlzidhlqbsvnc9wijbaaz-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv
#8 68.20   /nix/store/snllp5gsbghcwzsbc5zmd8p0x416qx9v-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv
#8 68.20 these 44 paths will be fetched (47.87 MiB download, 242.81 MiB unpacked):
#8 68.20   /nix/store/cf7gkacyxmm66lwl5nj6j6yykbrg4q5c-acl-2.3.2
#8 68.20   /nix/store/a9jgnlhkjkxav6qrc3rzg2q84pkl2wvr-attr-2.5.2
#8 68.20   /nix/store/5mh7kaj2fyv8mk4sfq1brwxgc02884wi-bash-5.2p37
#8 68.20   /nix/store/wf5zj2gbib3gjqllkabxaw4dh0gzcla3-builder.pl
#8 68.20   /nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8
#8 68.20   /nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin
#8 68.20   /nix/store/4s9rah4cwaxflicsk5cndnknqlk9n4p3-coreutils-9.5
#8 68.20   /nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10
#8 68.20   /nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2
#8 68.20   /nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46
#8 68.20   /nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0
#8 68.20   /nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1
#8 68.20   /nix/store/bpq1s72cw9qb2fs8mnmlw6hn2c7iy0ss-gcc-14-20241116-lib
#8 68.20   /nix/store/17v0ywnr3akp85pvdi56gwl99ljv95kx-gcc-14-20241116-libgcc
#8 68.20   /nix/store/65h17wjrrlsj2rj540igylrx7fqcd6vq-glibc-2.40-36
#8 68.20   /nix/store/a2byxfv4lc8f2g5xfzw8cz5q8k05wi29-gmp-with-cxx-6.3.0
#8 68.20   /nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01
#8 68.20   /nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11
#8 68.20   /nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1
#8 68.20   /nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9
#8 68.20   /nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35
#8 68.20   /nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13
#8 68.20   /nix/store/wwipgdqb4p2fr46kmw9c5wlk799kbl68-icu4c-74.2
#8 68.20   /nix/store/m8w3mf0i4862q22bxad0wspkgdy4jnkk-icu4c-74.2-dev
#8 68.20   /nix/store/34z2792zyd4ayl5186vx0s98ckdaccz9-libidn2-2.3.7
#8 68.20   /nix/store/xcqcgqazykf6s7fsn08k0blnh0wisdcl-libunistring-1.3
#8 68.20   /nix/store/r9ac2hwnmb0nxwsrvr6gi9wsqf2whfqj-libuv-1.49.2
#8 68.20   /nix/store/ll14czvpxglf6nnwmmrmygplm830fvlv-libuv-1.49.2-dev
#8 68.20   /nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36
#8 68.20   /nix/store/wlpq101dsifq98z2bk300x4dk80wcybr-nodejs-18.20.5
#8 68.20   /nix/store/h1ydpxkw9qhjdxjpic1pdc2nirggyy6f-openssl-3.3.2
#8 68.20   /nix/store/lygl27c44xv73kx1spskcgvzwq7z337c-openssl-3.3.2-bin
#8 68.20   /nix/store/pp2zf8bdgyz60ds8vcshk2603gcjgp72-openssl-3.3.2-dev
#8 68.20   /nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6
#8 68.20   /nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0
#8 68.20   /nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44
#8 68.20   /nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0
#8 68.20   /nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux
#8 68.20   /nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook
#8 68.20   /nix/store/acfkqzj5qrqs88a4a6ixnybbjxja663d-xgcc-14-20241116-libgcc
#8 68.20   /nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3
#8 68.20   /nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin
#8 68.20   /nix/store/cqlaa2xf6lslnizyj9xqa8j0ii1yqw0x-zlib-1.3.1
#8 68.20   /nix/store/1lggwqzapn5mn49l9zy4h566ysv9kzdb-zlib-1.3.1-dev
#8 68.21 copying path '/nix/store/wf5zj2gbib3gjqllkabxaw4dh0gzcla3-builder.pl' from 'https://cache.nixos.org'...
#8 68.21 copying path '/nix/store/17v0ywnr3akp85pvdi56gwl99ljv95kx-gcc-14-20241116-libgcc' from 'https://cache.nixos.org'...
#8 68.21 copying path '/nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01' from 'https://cache.nixos.org'...
#8 68.21 copying path '/nix/store/acfkqzj5qrqs88a4a6ixnybbjxja663d-xgcc-14-20241116-libgcc' from 'https://cache.nixos.org'...
#8 68.21 copying path '/nix/store/xcqcgqazykf6s7fsn08k0blnh0wisdcl-libunistring-1.3' from 'https://cache.nixos.org'...
#8 68.23 copying path '/nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook' from 'https://cache.nixos.org'...
#8 68.27 copying path '/nix/store/34z2792zyd4ayl5186vx0s98ckdaccz9-libidn2-2.3.7' from 'https://cache.nixos.org'...
#8 68.29 copying path '/nix/store/65h17wjrrlsj2rj540igylrx7fqcd6vq-glibc-2.40-36' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/a9jgnlhkjkxav6qrc3rzg2q84pkl2wvr-attr-2.5.2' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/5mh7kaj2fyv8mk4sfq1brwxgc02884wi-bash-5.2p37' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/bpq1s72cw9qb2fs8mnmlw6hn2c7iy0ss-gcc-14-20241116-lib' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/r9ac2hwnmb0nxwsrvr6gi9wsqf2whfqj-libuv-1.49.2' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/h1ydpxkw9qhjdxjpic1pdc2nirggyy6f-openssl-3.3.2' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3' from 'https://cache.nixos.org'...
#8 68.93 copying path '/nix/store/cqlaa2xf6lslnizyj9xqa8j0ii1yqw0x-zlib-1.3.1' from 'https://cache.nixos.org'...
#8 69.11 copying path '/nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6' from 'https://cache.nixos.org'...
#8 69.17 copying path '/nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin' from 'https://cache.nixos.org'...
#8 69.19 copying path '/nix/store/cf7gkacyxmm66lwl5nj6j6yykbrg4q5c-acl-2.3.2' from 'https://cache.nixos.org'...
#8 69.24 copying path '/nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46' from 'https://cache.nixos.org'...
#8 69.24 copying path '/nix/store/1lggwqzapn5mn49l9zy4h566ysv9kzdb-zlib-1.3.1-dev' from 'https://cache.nixos.org'...
#8 69.36 copying path '/nix/store/ll14czvpxglf6nnwmmrmygplm830fvlv-libuv-1.49.2-dev' from 'https://cache.nixos.org'...
#8 69.72 copying path '/nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin' from 'https://cache.nixos.org'...
#8 69.72 copying path '/nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35' from 'https://cache.nixos.org'...
#8 69.85 copying path '/nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11' from 'https://cache.nixos.org'...
#8 69.85 copying path '/nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13' from 'https://cache.nixos.org'...
#8 70.70 copying path '/nix/store/lygl27c44xv73kx1spskcgvzwq7z337c-openssl-3.3.2-bin' from 'https://cache.nixos.org'...
#8 70.71 copying path '/nix/store/a2byxfv4lc8f2g5xfzw8cz5q8k05wi29-gmp-with-cxx-6.3.0' from 'https://cache.nixos.org'...
#8 70.71 copying path '/nix/store/wwipgdqb4p2fr46kmw9c5wlk799kbl68-icu4c-74.2' from 'https://cache.nixos.org'...
#8 70.71 copying path '/nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0' from 'https://cache.nixos.org'...
#8 70.91 copying path '/nix/store/pp2zf8bdgyz60ds8vcshk2603gcjgp72-openssl-3.3.2-dev' from 'https://cache.nixos.org'...
#8 70.92 copying path '/nix/store/4s9rah4cwaxflicsk5cndnknqlk9n4p3-coreutils-9.5' from 'https://cache.nixos.org'...
#8 71.24 copying path '/nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10' from 'https://cache.nixos.org'...
#8 71.24 copying path '/nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0' from 'https://cache.nixos.org'...
#8 71.24 copying path '/nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0' from 'https://cache.nixos.org'...
#8 71.65 copying path '/nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux' from 'https://cache.nixos.org'...
#8 71.91 building '/nix/store/cjdjkmr6gy2h8l0cra71whgrvy030kx1-libraries.drv'...
#8 72.67 building '/nix/store/bs6g8vhkfynvlzidhlqbsvnc9wijbaaz-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv'...
#8 73.14 copying path '/nix/store/m8w3mf0i4862q22bxad0wspkgdy4jnkk-icu4c-74.2-dev' from 'https://cache.nixos.org'...
#8 73.37 copying path '/nix/store/wlpq101dsifq98z2bk300x4dk80wcybr-nodejs-18.20.5' from 'https://cache.nixos.org'...
#8 75.27 building '/nix/store/snllp5gsbghcwzsbc5zmd8p0x416qx9v-ffeebf0acf3ae8b29f8c7049cd911b9636efd7e7-env.drv'...
#8 75.38 created 5 symlinks in user environment
#8 75.56 building '/nix/store/x29qbnfwycb5g1np9cryfrz4cvvl55nq-user-environment.drv'...
#8 75.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/profile
#8 75.78 removing profile version 1
#8 75.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/channels
#8 75.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/profile
#8 75.78 removing old generations of profile /nix/var/nix/profiles/per-user/root/channels
#8 75.79 finding garbage collector roots...
#8 75.79 removing stale link from '/nix/var/nix/gcroots/auto/lzjbmb2ry0z7lma2fvpqprb12921pnb5' to '/nix/var/nix/profiles/per-user/root/profile-1-link'
#8 75.79 deleting garbage...
#8 75.80 deleting '/nix/store/a9qf4wwhympzs35ncp80r185j6a21w07-user-environment'
#8 75.80 deleting '/nix/store/253kwn1730vnay87xkjgxa2v97w3y079-user-environment.drv'
#8 75.80 deleting '/nix/store/hn5mrh362n52x8wwab9s1v6bgn4n5c94-env-manifest.nix'
#8 75.82 deleting '/nix/store/na4c03201p0gmhn3bqr089x0xqia157w-source'
#8 75.82 deleting '/nix/store/1i003ijlh9i0mzp6alqby5hg3090pjdx-perl-5.40.0'
#8 75.87 deleting '/nix/store/4ig84cyqi6qy4n0sanrbzsw1ixa497jx-stdenv-linux'
#8 75.87 deleting '/nix/store/h18s640fnhhj2qdh5vivcfbxvz377srg-xz-5.6.3-bin'
#8 75.87 deleting '/nix/store/c2njy6bv84kw1i4bjf5k5gn7gz8hn57n-xz-5.6.3'
#8 75.87 deleting '/nix/store/abm77lnrkrkb58z6xp1qwjcr1xgkcfwm-gnused-4.9'
#8 75.88 deleting '/nix/store/6cr0spsvymmrp1hj5n0kbaxw55w1lqyp-libxcrypt-4.4.36'
#8 75.88 deleting '/nix/store/mglixp03lsp0w986svwdvm7vcy17rdax-bzip2-1.0.8-bin'
#8 75.88 deleting '/nix/store/ivl2v8rgg7qh1jkj5pwpqycax3rc2hnl-bzip2-1.0.8'
#8 75.88 deleting '/nix/store/c4rj90r2m89rxs64hmm857mipwjhig5d-file-5.46'
#8 75.88 deleting '/nix/store/d29r1bdmlvwmj52apgcdxfl1mm9c5782-update-autotools-gnu-config-scripts-hook'
#8 75.88 deleting '/nix/store/srfxqk119fijwnprgsqvn68ys9kiw0bn-patchelf-0.15.0'
#8 75.89 deleting '/nix/store/1m67ipsk39xvhyqrxnzv2m2p48pil8kl-gnu-config-2024-01-01'
#8 75.89 deleting '/nix/store/5yja5dpk2qw1v5mbfbl2d7klcdfrh90w-patch-2.7.6'
#8 75.89 deleting '/nix/store/74h4z8k82pmp24xryflv4lxkz8jlpqqd-ed-1.20.2'
#8 75.89 deleting '/nix/store/a3c47r5z1q2c4rz0kvq8hlilkhx2s718-gawk-5.3.1'
#8 75.89 deleting '/nix/store/nvvj6sk0k6px48436drlblf4gafgbvzr-gzip-1.13'
#8 75.89 deleting '/nix/store/1c0dv2pdlshjz5kmjd4dfp3c96yncr23-libraries'
#8 75.89 deleting '/nix/store/aap6cq56amx4mzbyxp2wpgsf1kqjcr1f-gnugrep-3.11'
#8 75.90 deleting '/nix/store/3j1p598fivxs69wx3a657ysv3rw8k06l-pcre2-10.44'
#8 75.90 deleting '/nix/store/jqrz1vq5nz4lnv9pqzydj0ir58wbjfy1-findutils-4.10.0'
#8 75.90 deleting '/nix/store/lwi59jcfwk2lnrakmm1y5vw85hj3n1bi-source'
#8 81.08 deleting '/nix/store/wf5zj2gbib3gjqllkabxaw4dh0gzcla3-builder.pl'
#8 81.09 deleting '/nix/store/00g69vw7c9lycy63h45ximy0wmzqx5y6-diffutils-3.10'
#8 81.09 deleting '/nix/store/fp6cjl1zcmm6mawsnrb5yak1wkz2ma8l-gnumake-4.4.1'
#8 81.10 deleting '/nix/store/9cwwj1c9csmc85l2cqzs3h9hbf1vwl6c-gnutar-1.35'
#8 81.11 deleting unused links...
#8 83.98 note: currently hard linking saves -1.55 MiB
#8 83.99 29 store paths deleted, 247.84 MiB freed
#8 DONE 84.1s
#9 [stage-0  5/18] COPY .nixpacks/assets /assets/
#9 DONE 0.0s
#10 [stage-0  6/18] COPY . /app/.
#10 DONE 0.1s
#11 [stage-0  7/18] RUN  rm -rf client/index.html dist/public/index.html || true
#11 DONE 0.2s
#12 [stage-0  8/18] COPY . /app/.
#12 DONE 0.2s
#13 [stage-0  9/18] RUN  echo 'CADDY PHASE COMPLETELY DISABLED'
#13 0.191 CADDY PHASE COMPLETELY DISABLED
#13 DONE 0.2s
#14 [stage-0 10/18] RUN  echo 'NODE.JS SERVER HANDLES ALL REQUESTS'
#14 0.236 NODE.JS SERVER HANDLES ALL REQUESTS
#14 DONE 0.3s
#15 [stage-0 11/18] RUN  rm -rf /assets/Caddyfile || true
#15 DONE 0.4s
#16 [stage-0 12/18] COPY . /app/.
#16 DONE 0.4s
#17 [stage-0 13/18] RUN --mount=type=cache,id=cY7etteaxFY-/root/npm,target=/root/.npm npm ci
#17 0.695 npm warn config production Use `--omit=dev` instead.
#17 7.087 npm warn deprecated @esbuild-kit/esm-loader@2.6.5: Merged into tsx: https://tsx.is
#17 7.367 npm warn deprecated @esbuild-kit/core-utils@3.3.2: Merged into tsx: https://tsx.is
#17 20.84
#17 20.84 added 491 packages, and audited 492 packages in 20s
#17 20.84
#17 20.84 66 packages are looking for funding
#17 20.84   run `npm fund` for details
#17 20.89
#17 20.89 11 vulnerabilities (3 low, 8 moderate)
#17 20.89
#17 20.89 To address issues that do not require attention, run:
#17 20.89   npm audit fix
#17 20.89
#17 20.89 To address all issues (including breaking changes), run:
#17 20.89   npm audit fix --force
#17 20.89
#17 20.89 Run `npm audit` for details.
#17 DONE 21.2s
#18 [stage-0 14/18] COPY . /app/.
#18 DONE 0.1s
#19 [stage-0 15/18] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache npm run build
#19 0.346 npm warn config production Use `--omit=dev` instead.
#19 0.387
#19 0.387 > rest-express@1.0.0 build
#19 0.387 > vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist
#19 0.387
#19 0.685 vite v5.4.19 building for production...
#19 0.737 ✓ 0 modules transformed.
#19 0.739 x Build failed in 28ms
#19 0.740 error during build:
#19 0.740 Could not resolve entry module "client/index.html".
#19 0.740     at getRollupError (file:///app/node_modules/rollup/dist/es/shared/parseAst.js:396:41)
#19 0.740     at error (file:///app/node_modules/rollup/dist/es/shared/parseAst.js:392:42)
#19 0.740     at ModuleLoader.loadEntryModule (file:///app/node_modules/rollup/dist/es/shared/node-entry.js:20086:20)
#19 0.740     at async Promise.all (index 0)
#19 ERROR: process "/bin/bash -ol pipefail -c npm run build" did not complete successfully: exit code: 1
------
> [stage-0 15/18] RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache npm run build:
0.387
0.685 vite v5.4.19 building for production...
0.737 ✓ 0 modules transformed.
0.739 x Build failed in 28ms
0.740 error during build:
0.740 Could not resolve entry module "client/index.html".
0.740     at getRollupError (file:///app/node_modules/rollup/dist/es/shared/parseAst.js:396:41)
0.740     at error (file:///app/node_modules/rollup/dist/es/shared/parseAst.js:392:42)
0.740     at ModuleLoader.loadEntryModule (file:///app/node_modules/rollup/dist/es/shared/node-entry.js:20086:20)
0.740     at async Promise.all (index 0)
------
7 warnings found (use docker --debug to expand):
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "SESSION_SECRET") (line 11)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "STRIPE_SECRET_KEY") (line 11)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "STRIPE_WEBHOOK_SECRET") (line 11)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "SESSION_SECRET") (line 12)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "STRIPE_SECRET_KEY") (line 12)
- SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "STRIPE_WEBHOOK_SECRET") (line 12)
- UndefinedVar: Usage of undefined variable '$NIXPACKS_PATH' (line 25)
Dockerfile:31
--------------------
|     # build phase
|     COPY . /app/.
| >>> RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache npm run build
|     RUN --mount=type=cache,id=cY7etteaxFY-node_modules/cache,target=/app/node_modules/.cache node scripts/migrate-db.js || echo 'Migration will run at startup'
|
--------------------
ERROR: failed to solve: process "/bin/bash -ol pipefail -c npm run build" did not complete successfully: exit code: 1
Error: Docker build failed
Error response from daemon: No such container: sosiol-app-su9iyx-NDoFfyAdb-
Error ❌
Error response from daemon: No such container: sosiol-app-su9iyx-NDoFfyAdb-